<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Guide – Intelligent Control System using NARMA-L2</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      line-height: 1.6;
      background-color: #f9fafc;
      color: #222;
      margin: 30px;
    }
    h1, h2 {
      color: #003366;
    }
    h3 {
      color: #004b87;
    }
    code, pre {
      background: #eef2f6;
      border-radius: 6px;
      padding: 4px 8px;
      font-family: "Consolas", monospace;
    }
    .section {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    a {
      color: #0078d7;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<h1>Welcome to the Learning Application on Intelligent Control Systems using the NARMA-L2 Model</h1>

<p>
Welcome to our educational software for intelligent control systems.  
This application is designed for learners who wish to understand the essential functional blocks of an intelligent control system.  
To make system operations easier to visualize, we use a DC motor as the default simulation model.  
However, if you want to simulate another control plant, feel free to use our tool – it is fully customizable.  
Below is a detailed explanation of how our system works.
</p>

<p>
Before exploring the four main components, please log in by clicking the <b>“Login”</b> button in the top-right corner of the interface.  
After logging in, define the sampling time in the <b>Ts</b> field.  
This parameter will be synchronized across all blocks in the system.
</p>

<div class="section">
  <h2>1. Reference Velocity (Input)</h2>

  <p>This is where you define the desired output values of the plant over time.</p>
  <p>You can refer to various <a href="https://www.pmdcorp.com/resources/type/articles/get/s-curve-profiles-deep-dive-article" target="_blank">motion planning</a> methods for motor speed trajectory design.</p>

  <h3>Supported Modes</h3>

  <ul>
    <li><b>Normal Mode:</b>
      <ul>
        <li><b>Random Generator:</b> Generates random desired signals.  
        For safety, please provide the <b>minimum</b> and <b>maximum</b> output range of your control plant (e.g., maximum motor speed).</li>

        <li><b>Manual Generator:</b> Only step generators are supported.  
        Please input two arrays: <code>step_time</code> and <code>step_value</code>.  
        Example:<br>
        <code>step_time = [0, 1, 2, 3]</code><br>
        <code>step_value = [0.1, -0.2, 0.3, 1]</code><br>
        The generator will produce output = 0.1 for t&lt;1, output = -0.2 for 1&lt;t&lt;2, etc.</li>
      </ul>
    </li>

    <li><b>Advance Mode:</b>  
    In this mode, you can fully define how the reference signal changes over time by editing a pre-defined function.  
    Please do not change the function name, input parameters, or output variable to maintain framework compatibility.
    <pre><code>def generator(t):
    # User-defined reference signal
    # Example:
    # output = sin(t)
    # End user-defined reference signal
    return output
    </code></pre>
    </li>
  </ul>
</div>

<div class="section">
  <h2>2. Plant Model (Controlled Object)</h2>

  <ul>
    <li>If you are working with a DC motor, please provide the corresponding motor parameters.</li>
    <li>If you want to test another control plant, check the <b>“Custom Mode”</b> box and input your own transfer function.</li>
    <li>Both methods will generate the final transfer function used by the control system.  
        Click <b>“Save”</b> to confirm and close the configuration.</li>
  </ul>
</div>

<div class="section">
  <h2>3. Controller Block using NARMA-L2 Model</h2>

  <p>
    This block allows you to design a controller based on the <b>NARMA-L2 model</b>, developed using <b>Artificial Neural Networks</b>.  
    If you are not familiar with this concept, please refer to:  
    <a href="https://ww2.mathworks.cn/help/deeplearning/ug/design-narma-l2-neural-controller-in-simulink.html" target="_blank">MathWorks NARMA-L2 Controller Documentation</a>.
  </p>

  <h3>How NARMA-L2 Model Works</h3>

  <p>The NARMA-L2 procedure consists of two stages:</p>

  <ul>
    <li><b>Stage 1: System Identification</b>
      <ul>
        <li>The model observes the response of the plant model based on input signals.</li>
        <li>The input-output pairs form a dataset.</li>
        <li>The dataset is used to train the NARMA-L2 model to predict system behavior (dynamic modeling).</li>
      </ul>
    </li>

    <li><b>Stage 2: Control Computation</b>
      <ul>
        <li>After system identification, the model receives the desired system output.</li>
        <li>It computes the necessary plant input that makes the system follow the desired output trajectory.</li>
      </ul>
    </li>
  </ul>

  <p>
    To train the model, ensure the plant model is defined first.  
    Otherwise, the <b>“Generate Dataset”</b> button will remain inactive.  
    This function generates random inputs for the plant and collects outputs to create training data.
  </p>

  <ul>
    <li>For a quick demonstration, press the <b>“Default”</b> button.  
        It loads predefined model parameters.  
        You may skip the remaining steps if you only want to see a mock-up result.</li>

    <li>Specify your NARMA-L2 architecture:  
        number of hidden layers, number of delayed plant inputs, and number of delayed plant outputs  
        (recommended for advanced users or data scientists).</li>

    <li>After verifying your architecture, click <b>“Save Config”</b>.  
        This initializes a new NARMA-L2 model with randomized initial weights.</li>

    <li>If you already have pretrained weights, you may use <b>“Import Weights”</b>.  
        A confirmation window will appear once loaded.</li>

    <li>If you do not have a dataset, you can generate one using <b>“Generate Data”</b> or import an existing dataset via <b>“Import Data”</b>.</li>

    <li>Once a dataset is available, the <b>“Train Network”</b> button becomes active.</li>

    <li>After training is completed, an evaluation window will appear.  
        When satisfied, click <b>“Save Model”</b> to apply the trained weights.</li>

    <li>(Optional) You may export datasets or model weights for future use to save time.</li>
  </ul>
</div>

<div class="section">
  <h2>4. Output Graph Block</h2>

  <p>
<p>
    After all configurations are complete, press the <b>Start</b> button to run the simulation.
    You will be prompted to choose between two options: <b>train offline</b> and <b>train online</b>.
</p>

<p>
    <b>Train offline</b> means the NARMA-L2 model will <b>not</b> continue learning during run-time.<br>
    <b>Train online</b> allows the NARMA-L2 model to learn new information during operation, enabling the controller 
    to adapt to changes in the plant model, whose transfer function may vary over time (as often happens in real-world systems).
</p>

<p>
    Users with the <i>(Data scientists only)</i> privilege can manually define the batch size, learning rate, 
    and number of epochs for online training, while others will use the default online training parameters.
</p>

<p>
    The graph block will display the tracking response, actual plant output, and key performance indicators 
    such as MSE, MAE,...
</p>
  </p>
</div>

<div class="section">
  <h2>Final Note</h2>

  <p>
    We hope this tool helps you learn and experiment with intelligent control systems using the NARMA-L2 model.  
    Wishing you success in your research and exploration!
  </p>
</div>

</body>
</html>
